{"version":3,"sources":["webpack:///./src/views/ratings/Ratings.vue?6a63","webpack:///./src/views/ratings/Ratings.vue?8883","webpack:///src/views/ratings/Ratings.vue","webpack:///./src/views/ratings/Ratings.vue?3c4c","webpack:///./src/views/ratings/Ratings.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","ref","staticClass","_v","_s","seller","score","rankRate","attrs","serviceScore","foodScore","deliveryTime","ratings","selectType","onlyContent","desc","on","selectRating","toggleContent","_l","rating","index","directives","name","rawName","value","needshow","rateType","text","expression","avatar","username","recommend","length","item","_f","rateTime","staticRenderFns","component"],"mappings":"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","file":"js/chunk-72629b12.1551a836.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Ratings.vue?vue&type=style&index=0&id=86513c3c&lang=stylus&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Ratings.vue?vue&type=style&index=0&id=86513c3c&lang=stylus&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"ratings\",staticClass:\"ratings\"},[_c('div',{staticClass:\"ratings-content\"},[_c('div',{staticClass:\"overview\"},[_c('div',{staticClass:\"overview-left\"},[_c('h1',{staticClass:\"score\"},[_vm._v(_vm._s(_vm.seller.score))]),_c('div',{staticClass:\"title\"},[_vm._v(\"综合评分\")]),_c('div',{staticClass:\"rank\"},[_vm._v(\"高于周边商家\"+_vm._s(_vm.seller.rankRate)+\"%\")])]),_c('div',{staticClass:\"overview-right\"},[_c('div',{staticClass:\"score-wrapper\"},[_c('span',{staticClass:\"title\"},[_vm._v(\"服务态度\")]),_c('star',{attrs:{\"size\":36,\"score\":_vm.seller.serviceScore}}),_c('span',{staticClass:\"score\"},[_vm._v(_vm._s(_vm.seller.serviceScore))])],1),_c('div',{staticClass:\"score-wrapper\"},[_c('span',{staticClass:\"title\"},[_vm._v(\"商品评分\")]),_c('star',{attrs:{\"size\":36,\"score\":_vm.seller.foodScore}}),_c('span',{staticClass:\"score\"},[_vm._v(_vm._s(_vm.seller.foodScore))])],1),_c('div',{staticClass:\"delivery-wrapper\"},[_c('span',{staticClass:\"title\"},[_vm._v(\"送达时间\")]),_c('span',{staticClass:\"delivery\"},[_vm._v(_vm._s(_vm.seller.deliveryTime)+\"分钟\")])])])]),_c('split'),_c('rating-select',{attrs:{\"ratings\":_vm.ratings,\"selectType\":_vm.selectType,\"onlyContent\":_vm.onlyContent,\"desc\":_vm.desc},on:{\"select\":_vm.selectRating,\"toggle\":_vm.toggleContent}}),_c('div',{staticClass:\"rating-wrapper\"},[_c('ul',_vm._l((_vm.ratings),function(rating,index){return _c('li',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.needshow(rating.rateType,rating.text)),expression:\"needshow(rating.rateType,rating.text)\"}],staticClass:\"rating-item border-1px\"},[_c('div',{staticClass:\"avatar\"},[_c('img',{attrs:{\"width\":\"28\",\"height\":\"28\",\"src\":rating.avatar}})]),_c('div',{staticClass:\"content\"},[_c('div',{staticClass:\"name\"},[_vm._v(_vm._s(rating.username))]),_c('div',{staticClass:\"star-wrapper\"},[_c('star',{attrs:{\"size\":24,\"score\":rating.score}}),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(rating.deliveryTime),expression:\"rating.deliveryTime\"}],staticClass:\"delivery\"},[_vm._v(_vm._s(rating.deliveryTime))])],1),_c('p',{staticClass:\"text\"},[_vm._v(_vm._s(rating.text))]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(rating.recommend && rating.recommend.length),expression:\"rating.recommend && rating.recommend.length\"}],staticClass:\"recommend\"},[_c('span',{staticClass:\"icon-thumb_up\"}),_vm._l((rating.recommend),function(item,index){return _c('span',{staticClass:\"item\"},[_vm._v(_vm._s(item))])})],2),_c('div',{staticClass:\"time\"},[_vm._v(_vm._s(_vm._f(\"formatDate\")(rating.rateTime)))])])])}),0)])],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"ratings\" ref=\"ratings\">\r\n    <div class=\"ratings-content\">\r\n      <div class=\"overview\">\r\n        <div class=\"overview-left\">\r\n          <h1 class=\"score\">{{seller.score}}</h1>\r\n          <div class=\"title\">综合评分</div>\r\n          <div class=\"rank\">高于周边商家{{seller.rankRate}}%</div>\r\n        </div>\r\n        <div class=\"overview-right\">\r\n          <div class=\"score-wrapper\">\r\n            <span class=\"title\">服务态度</span>\r\n            <star :size=\"36\" :score=\"seller.serviceScore\"></star>\r\n            <span class=\"score\">{{seller.serviceScore}}</span>\r\n          </div>\r\n          <div class=\"score-wrapper\">\r\n            <span class=\"title\">商品评分</span>\r\n            <star :size=\"36\" :score=\"seller.foodScore\"></star>\r\n            <span class=\"score\">{{seller.foodScore}}</span>\r\n          </div>\r\n          <div class=\"delivery-wrapper\">\r\n            <span class=\"title\">送达时间</span>\r\n            <span class=\"delivery\">{{seller.deliveryTime}}分钟</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <split></split>\r\n      <rating-select \r\n        @select=\"selectRating\" \r\n        @toggle=\"toggleContent\"\r\n        :ratings=\"ratings\"\r\n        :selectType=\"selectType\"\r\n        :onlyContent=\"onlyContent\"\r\n        :desc=\"desc\"\r\n      >\r\n      </rating-select>\r\n      <div class=\"rating-wrapper\">\r\n        <ul>\r\n          <li \r\n            v-show=\"needshow(rating.rateType,rating.text)\"\r\n            v-for=\"(rating, index) in ratings\" \r\n            class=\"rating-item border-1px\"\r\n          >\r\n            <div class=\"avatar\">\r\n              <img width=\"28\" height=\"28\" :src=\"rating.avatar\">\r\n            </div>\r\n            <div class=\"content\">\r\n              <div class=\"name\">{{rating.username}}</div>\r\n              <div class=\"star-wrapper\">\r\n                <star :size=\"24\" :score=\"rating.score\"></star>\r\n                <span class=\"delivery\" v-show=\"rating.deliveryTime\">{{rating.deliveryTime}}</span>\r\n              </div>\r\n              <p class=\"text\">{{rating.text}}</p>\r\n              <div class=\"recommend\" v-show=\"rating.recommend && rating.recommend.length\">\r\n                <span class=\"icon-thumb_up\"></span>\r\n                <span v-for=\"(item, index) in rating.recommend\" class=\"item\">{{item}}</span>\r\n              </div>\r\n              <div class=\"time\">{{rating.rateTime | formatDate}}</div>\r\n            </div>\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\n  import Bscroll from 'better-scroll'\r\n  import {getRatings} from '@/api/index.js'\r\n  import {formatDate} from '@/assets/js/date.js'\r\n  import Star from '@/components/star/Star'\r\n  import Split from '@/components/split/Split'\r\n  import RatingSelect from '@/components/ratingselect/RatingSelect'\r\n\r\n  const ALL = 2;\r\n  const POSITIVE = 0;\r\n  const NEGATIVE = 1;\r\n\r\n  export default {\r\n    name: 'Ratings',\r\n    components: {\r\n      Star,\r\n      Split,\r\n      RatingSelect\r\n    },\r\n    props: {\r\n      seller: {\r\n        type: Object\r\n      }\r\n    },\r\n    data() {\r\n      return {\r\n        ratings:[],\r\n        selectType: ALL,\r\n        onlyContent: true,\r\n        desc: {\r\n          all:'全部',\r\n          positive: '满意',\r\n          negative: '不满意'\r\n        }\r\n      }\r\n    },\r\n    created() {\r\n      getRatings().then((ratings) => {\r\n        this.ratings = ratings\r\n        this.$nextTick(() => {\r\n          this.scroll = new Bscroll(this.$refs.ratings, {\r\n            click: true\r\n          })\r\n        })\r\n      })\r\n    },\r\n    methods: {\r\n      selectRating(type) {\r\n        this.selectType = type;\r\n        this.$nextTick(() => {\r\n          this.scroll.refresh();\r\n        })\r\n      },\r\n      toggleContent() {\r\n        this.onlyContent = !this.onlyContent;\r\n        this.$nextTick(() => {\r\n          this.scroll.refresh();\r\n        })\r\n      },\r\n      // 每条评价是否显示，取决于两个部分：是否有内容、是哪种评价（selectType）\r\n      needshow(type, text) {\r\n        // 只显示内容，且内容为空，则不显示\r\n        if (this.onlyContent && !text) {\r\n          return false;\r\n        }\r\n        // 当选择全部时，直接显示；否则，将this.selectType赋值给当前type\r\n        if (this.selectType === ALL) {\r\n          return true;\r\n        } else {\r\n          return type === this.selectType;\r\n        }\r\n      }\r\n    },\r\n    filters: {\r\n      formatDate(time) {\r\n        let date = new Date(time);\r\n        return formatDate(date, 'yyyy-MM-dd hh:mm');\r\n      }\r\n    }\r\n  }\r\n</script>\r\n<style lang=\"stylus\" scoped>\r\n  @import '~@/assets/stylus/mixins.styl'\r\n\r\n  .ratings\r\n    position: absolute\r\n    top: 174px\r\n    bottom: 0\r\n    left: 0\r\n    width: 100%\r\n    overflow: hidden\r\n    .overview\r\n      display: flex\r\n      padding: 18px 0\r\n      .overview-left\r\n        flex: 0 0 137px\r\n        padding: 6px 0\r\n        width: 137px\r\n        border-right: 1px solid rgba(7, 17, 27, 0.1)\r\n        text-align: center\r\n        @media only screen and (max-width: 320px)\r\n          flex: 0 0 120px\r\n          width: 120px\r\n        .score\r\n          margin-bottom: 6px\r\n          line-height: 28px\r\n          font-size: 24px\r\n          color: rgb(255, 153, 0)\r\n        .title\r\n          margin-bottom: 8px\r\n          line-height: 12px\r\n          font-size: 12px\r\n          color: rgb(7, 17, 27)\r\n        .rank\r\n          line-height: 10px\r\n          font-size: 10px\r\n          color: rgb(147, 153, 159)\r\n      .overview-right\r\n        flex: 1\r\n        padding: 6px 0 6px 24px\r\n        @media only screen and (max-width: 320px)\r\n          padding-left: 6px\r\n        .score-wrapper\r\n          margin-bottom: 8px\r\n          font-size: 0\r\n          .title\r\n            display: inline-block\r\n            vertical-align: top\r\n            line-height: 18px\r\n            font-size: 12px\r\n            color: rgb(7, 17, 27)\r\n          .star\r\n            display: inline-block\r\n            margin: 0 12px \r\n            vertical-align: top\r\n          .score\r\n            display: inline-block \r\n            vertical-align: top\r\n            line-height: 18px\r\n            font-size: 12px\r\n            color: rgb(255, 153, 0)\r\n        .delivery-wrapper\r\n          font-size: 0\r\n          .title\r\n            line-height: 18px\r\n            font-size: 12px\r\n            color: rgb(7, 17, 27)\r\n          .delivery\r\n            margin-left: 12px\r\n            font-size: 12px\r\n            color: rgb(147, 153, 159)                  \r\n\r\n    .rating-wrapper\r\n      padding: 0 18px\r\n      .rating-item\r\n        display: flex\r\n        padding: 18px 0\r\n        border-1px(rgba(7, 17, 27, 0.1))\r\n        .avatar\r\n          flex: 0 0 28px\r\n          width: 28px\r\n          margin-right: 12px\r\n          img\r\n            border-radius: 50%\r\n        .content\r\n          position: relative\r\n          flex: 1\r\n          .name\r\n            margin-bottom: 4px\r\n            line-height: 12px\r\n            font-size: 10px\r\n            color: rgb(7, 17, 27)\r\n          .star-wrapper\r\n            margin-bottom: 6px\r\n            font-size: 0\r\n            .star\r\n              display: inline-block\r\n              vertical-align: top\r\n              margin-right: 6px\r\n            .delivery\r\n              display: inline-block\r\n              vertical-align: top\r\n              line-height: 12px\r\n              font-size: 10px\r\n              color: rgb(147, 153, 159)\r\n          .text\r\n            margin-bottom: 8px\r\n            line-height: 18px\r\n            color: rgb(7, 17, 27)\r\n            font-size: 12px\r\n          .recommend\r\n            line-height: 16px\r\n            font-size: 0\r\n            .icon-thumb_up, .item\r\n              display: inline-block\r\n              margin: 0 8px 4px 0\r\n              font-size: 9px\r\n            .icon-thumb_up\r\n              color: rgb(0, 160, 220)\r\n            .item\r\n              padding: 0 6px\r\n              border: 1px solid rgba(7, 17, 27, 0.1)\r\n              border-radius: 1px\r\n              color: rgb(147, 153, 159)\r\n              background: #fff\r\n          .time\r\n            position: absolute\r\n            top: 0\r\n            right: 0\r\n            line-height: 12px\r\n            font-size: 10px\r\n            color: rgb(147, 153, 159)    \r\n                                     \r\n          \r\n        \r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Ratings.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Ratings.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Ratings.vue?vue&type=template&id=86513c3c&scoped=true&\"\nimport script from \"./Ratings.vue?vue&type=script&lang=js&\"\nexport * from \"./Ratings.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Ratings.vue?vue&type=style&index=0&id=86513c3c&lang=stylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"86513c3c\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}